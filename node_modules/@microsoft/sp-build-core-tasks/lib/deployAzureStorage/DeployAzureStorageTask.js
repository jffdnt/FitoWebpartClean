"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DeployAzureStorageTask = void 0;
const terminal_1 = require("@rushstack/terminal");
const spfx_heft_plugins_1 = require("@microsoft/spfx-heft-plugins");
const gulp_core_build_1 = require("@microsoft/gulp-core-build");
const GulpTaskTerminalProvider_1 = require("../utilities/GulpTaskTerminalProvider");
// This should be "OdspGulpTask<void>", but GulpTaskTerminalProvider doesn't like that
class DeployAzureStorageTask extends gulp_core_build_1.GulpTask {
    constructor() {
        super('deploy-azure-storage');
    }
    async executeTask() {
        const terminal = new terminal_1.Terminal(new GulpTaskTerminalProvider_1.GulpTaskTerminalProvider(this));
        await spfx_heft_plugins_1._DeployAzureStoragePlugin.deployToAzureAsync({
            terminal,
            buildFolder: this.buildConfig.rootPath,
            emitError: (error) => this.logError(error.message),
            tryCreateContainer: true
        });
    }
}
exports.DeployAzureStorageTask = DeployAzureStorageTask;
//# sourceMappingURL=DeployAzureStorageTask.js.map